(this.webpackJsonpstream_promoter=this.webpackJsonpstream_promoter||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/POCLogo.f5320c03.png"},33:function(e,t,a){e.exports=a(58)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),c=(a(38),a(2)),s=(a(39),a(4)),i=a(5),m=a(7),u=a(6),p=a(11),h=(a(40),a(27)),d=a.n(h),v=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-branding"},r.a.createElement(p.b,{to:"/",className:"app-title"},r.a.createElement("img",{className:"poc-logo",src:d.a}))),r.a.createElement("div",{className:"app-options"},r.a.createElement("nav",{className:"app-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.c,{to:"/submit"},"Submit a Streamer!"),r.a.createElement(p.c,{to:"/report"},"Report Abuse")))))))}}]),a}(n.Component),f=a(29),b=a.n(f),E=(a(50),encodeURI("http://192.168.1.86:8080")),g=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem("accessToken")&&t.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var a={headers:t};return e=Object.assign({},a,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))},j=function(e,t,a){var n=new Headers({"Content-Type":"application/json",username:t,platform:a});localStorage.getItem("accessToken")&&n.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var r={headers:n};return e=Object.assign({},r,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))},y=function(e,t,a,n){var r=new Headers({"Content-Type":"application/json",username:t,platform:a,url:n});localStorage.getItem("accessToken")&&r.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var o={headers:r};return e=Object.assign({},o,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))};function N(e){var t=e.stream;return"TWITCH"===t.platform?r.a.createElement(b.a,{className:"stream-video",url:t.streamURL,playing:!1,volume:0}):"MIXER"===t.platform?r.a.createElement("iframe",{className:"stream-video",src:"https://mixer.com/embed/player/"+t.username,title:t.username}):void 0}var O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={streams:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g({url:E+"/stream/all",method:"GET"}).then((function(t){e.setState({streams:t})}))}},{key:"render",value:function(){var e=this.state.streams;return r.a.createElement("div",{className:"stream-list"},e.map((function(e){return r.a.createElement("div",{className:"stream-item",key:e.username},r.a.createElement(N,{stream:e}))})))}}]),a}(n.Component);function S(){return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"container"},r.a.createElement(O,null)))}var k=a(1),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={streamer:"",platform:""},n.handleChangeText=n.handleChangeText.bind(Object(k.a)(n)),n.handleChangeSelect=n.handleChangeSelect.bind(Object(k.a)(n)),n.sendStreamer=n.sendStreamer.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"sendStreamer",value:function(){return j({url:encodeURI(E+"/stream/new"),method:"POST"},this.state.streamer,this.state.platform).then((function(e){return console.log(e)})).then(this.props.history.push("/"))}},{key:"handleChangeText",value:function(e){this.setState({streamer:e.target.value})}},{key:"handleChangeSelect",value:function(e){this.setState({platform:e.target.value})}},{key:"render",value:function(){return r.a.createElement("form",{className:"submit-form",onSubmit:this.sendStreamer},r.a.createElement("label",null,"Streamer Name: ",r.a.createElement("input",{className:"submit-form-name",type:"text",onChange:this.handleChangeText})),r.a.createElement("select",{className:"submit-form-platform",onChange:this.handleChangeSelect},r.a.createElement("option",{value:"default"},"Platform"),r.a.createElement("option",{value:"twitch"},"Twitch.tv")),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(n.Component),R=(a(51),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={streamer:"",platform:"",incidentURL:""},n.handleChangeText=n.handleChangeText.bind(Object(k.a)(n)),n.handleChangeSelect=n.handleChangeSelect.bind(Object(k.a)(n)),n.handleChangeURL=n.handleChangeURL.bind(Object(k.a)(n)),n.sendReport=n.sendReport.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"sendReport",value:function(){return y({url:encodeURI(E+"/report/new"),method:"POST"},this.state.streamer,this.state.platform,this.state.incidentURL).then((function(e){return console.log(e)})).then(this.props.history.push("/"))}},{key:"handleChangeText",value:function(e){this.setState({streamer:e.target.value})}},{key:"handleChangeURL",value:function(e){this.setState({incidentURL:e.target.value})}},{key:"handleChangeSelect",value:function(e){this.setState({platform:e.target.value})}},{key:"render",value:function(){return r.a.createElement("form",{className:"report-form",onSubmit:this.sendReport},r.a.createElement("label",null,"Streamer Name: "),r.a.createElement("input",{className:"report-form-name",type:"text",onChange:this.handleChangeText}),r.a.createElement("select",{className:"report-form-platform",onChange:this.handleChangeSelect},r.a.createElement("option",{value:"default"},"Platform"),r.a.createElement("option",{value:"twitch"},"Twitch.tv")),r.a.createElement("label",null,"Incident URL: "),r.a.createElement("input",{className:"report-form-url",type:"text",onChange:this.handleChangeURL}),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(n.Component)),T=(a(52),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-branding"},r.a.createElement(p.b,{to:"/moderation",className:"app-title"},"Home")),r.a.createElement("div",{className:"app-options"},r.a.createElement("nav",{className:"app-nav"},this.props.authenticated?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{onClick:this.props.onLogout},"Logout"))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.c,{to:"/login"},"Login")))))))}}]),a}(n.Component)),L=(a(53),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.approveRequest=function(e,t){console.log("approve"),j({url:E+"/moderation/approve",method:"POST"},e,t)},n.state={approvals:[],reports:[],currentUser:null,authenticated:!1},n.approveRequest=n.approveRequest.bind(Object(k.a)(n)),n.rejectRequest=n.rejectRequest.bind(Object(k.a)(n)),n.removeReportLink=n.removeReportLink.bind(Object(k.a)(n)),n.removeReport=n.removeReport.bind(Object(k.a)(n)),n.removeStreamer=n.removeStreamer.bind(Object(k.a)(n)),n.handleLogout=n.handleLogout.bind(Object(k.a)(n)),n.loadCurrentlyLoggedInUser=n.loadCurrentlyLoggedInUser.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.loadCurrentlyLoggedInUser(),g({url:E+"/moderation/all",method:"GET"}).then((function(t){e._isMounted&&e.setState({approvals:t})})),g({url:E+"/report/all",method:"GET"}).then((function(t){e._isMounted&&e.setState({reports:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"rejectRequest",value:function(e,t){console.log("reject"),j({url:E+"/moderation/reject",method:"POST"},e,t)}},{key:"removeReportLink",value:function(e,t,a){console.log("remove report link"),y({url:E+"/moderation/url",method:"DELETE"},e,t,a)}},{key:"removeReport",value:function(e,t){console.log("remove report"),j({url:E+"/moderation/report",method:"DELETE"},e,t)}},{key:"removeStreamer",value:function(e,t){console.log("remove streamer"),j({url:E+"/moderation/stream",method:"DELETE"},e,t)}},{key:"handleLogout",value:function(){localStorage.removeItem("accessToken"),this.setState({authenticated:!1,currentUser:null})}},{key:"loadCurrentlyLoggedInUser",value:function(){var e=this;(localStorage.getItem("accessToken")?g({url:encodeURI(E+"/auth/me"),method:"GET"}):Promise.reject("No Access Token Set")).then((function(t){e.setState({currentUser:t,authenticated:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.approvals,n=t.reports;return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"app-header"},r.a.createElement(T,{authenticated:this.state.authenticated,onLogout:this.handleLogout})),r.a.createElement("div",{className:"moderation-home"},r.a.createElement("div",{className:"split moderation-approval"},r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"moderation-label"},"Approve new Streamers"),r.a.createElement("div",{className:"moderation-approval-list"},a.map((function(t){return r.a.createElement("div",{className:"approval-item"},r.a.createElement("div",{className:"approval-name"},t.username),r.a.createElement("div",{className:"approval-url"},t.streamURL),r.a.createElement("button",{type:"submit",onClick:function(){return e.approveRequest(t.username,t.platform)}},"Approve"),r.a.createElement("button",{type:"submit",onClick:function(){return e.rejectRequest(t.username,t.platform)}},"Reject"))}))))),r.a.createElement("div",{className:"split moderation-report"},r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"moderation-label"},"Handle User Reports"),r.a.createElement("div",{className:"moderation-report-list"},n.map((function(t){return r.a.createElement("div",{className:"report-item"},r.a.createElement("div",{className:"report-name"},t.username),r.a.createElement("div",{className:"report-url-list"},t.incidentURL.map((function(a){return r.a.createElement("a",{className:"report-url-list-item",href:a},a,r.a.createElement("button",{type:"submit",onClick:function(){return e.removeReportLink(t.username,t.platform,a)}},"Remove Report Link"))}))),r.a.createElement("button",{type:"submit",onClick:function(){return e.removeStreamer(t.username,t.platform)}},"Remove Streamer"),r.a.createElement("button",{type:"submit",onClick:function(){return e.removeReport(t.username,t.platform)}},"Remove Report"))})))))))}}]),a}(n.Component)),I=a(30),U=a(31),w=a.n(U),x=(a(57),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={isLoading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.location.state&&this.props.location.state.error&&setTimeout((function(){w.a.error(e.props.location.state.error,{timeout:5e3}),e.props.history.replace({pathname:e.props.location.pathname,state:{}})}),100)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return this.props.authenticated?r.a.createElement(c.a,{to:{pathname:"/moderation",state:{from:this.props.location}}}):r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-content"},r.a.createElement("h1",{className:"login-title"},"Login to Streamers of Color"),r.a.createElement(P,this.props)))}}]),a}(n.Component)),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleInputChange=n.handleInputChange.bind(Object(k.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(I.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return g({url:encodeURI(E+"/auth/login"),method:"POST",body:JSON.stringify(e)})}(Object.assign({},this.state)).then((function(e){localStorage.setItem("accessToken",e.token),t.props.history.push("/moderation")})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,className:"form-control",onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,className:"form-control",onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Login")))}}]),a}(n.Component),M=x;var q=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app-header"},r.a.createElement(v,null)),r.a.createElement("div",{className:"app-body"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:S}),r.a.createElement(c.b,{path:"/submit",component:C}),r.a.createElement(c.b,{path:"/report",component:R}),r.a.createElement(c.b,{path:"/moderation",component:L}),r.a.createElement(c.b,{path:"/login",component:M}))))};l.a.render(r.a.createElement(p.a,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[33,12,13]]]);
//# sourceMappingURL=main.95d37d14.chunk.js.map