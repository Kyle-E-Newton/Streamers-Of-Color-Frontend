(this.webpackJsonpstream_promoter=this.webpackJsonpstream_promoter||[]).push([[0],{181:function(e,t,a){e.exports=a.p+"static/media/POCLogo.f5320c03.png"},186:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(7),c=(a(195),a(9)),l=a(10),s=a(12),i=a(11),m=a(18),u=(a(196),a(181)),p=a.n(u),d=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-branding"},r.a.createElement(m.b,{to:"/",className:"app-title"},r.a.createElement("img",{className:"poc-logo",src:p.a}))),r.a.createElement("div",{className:"app-options"},r.a.createElement("nav",{className:"app-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.c,{to:"/submit"},"Submit a Streamer!"),r.a.createElement(m.c,{to:"/report"},"Report Abuse")))))))}}]),a}(n.Component),h=a(183),f=a.n(h),v=(a(205),encodeURI("http://98.145.92.71:8080")),b=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem("accessToken")&&t.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var a={headers:t};return e=Object.assign({},a,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))},E=function(e,t,a){var n=new Headers({"Content-Type":"application/json",username:t,platform:a});localStorage.getItem("accessToken")&&n.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var r={headers:n};return e=Object.assign({},r,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))},g=function(e,t,a,n){var r=new Headers({"Content-Type":"application/json",username:t,platform:a,url:n});localStorage.getItem("accessToken")&&r.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var o={headers:r};return e=Object.assign({},o,e),fetch(encodeURI(e.url),e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))};function j(e){var t=e.stream;return"TWITCH"===t.platform?r.a.createElement(f.a,{className:"stream-video",url:t.streamURL,playing:!1,volume:0}):"MIXER"===t.platform?r.a.createElement("iframe",{className:"stream-video",src:"https://mixer.com/embed/player/"+t.username,title:t.username}):void 0}var y=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={streams:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b({url:v+"/stream/all",method:"GET"}).then((function(t){e.setState({streams:t})}))}},{key:"render",value:function(){var e=this.state.streams;return r.a.createElement("div",{className:"stream-list"},e.map((function(e){return r.a.createElement("div",{className:"stream-item",key:e.username},r.a.createElement(j,{stream:e}))})))}}]),a}(n.Component);function O(){return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"container"},r.a.createElement(y,null)))}var N=a(5),k=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={streamer:"",platform:""},n.handleChangeText=n.handleChangeText.bind(Object(N.a)(n)),n.handleChangeSelect=n.handleChangeSelect.bind(Object(N.a)(n)),n.sendStreamer=n.sendStreamer.bind(Object(N.a)(n)),n}return Object(l.a)(a,[{key:"sendStreamer",value:function(){return E({url:encodeURI(v+"/stream/new"),method:"POST"},this.state.streamer,this.state.platform).then((function(e){return console.log(e)})).then(this.props.history.push("/"))}},{key:"handleChangeText",value:function(e){this.setState({streamer:e.target.value})}},{key:"handleChangeSelect",value:function(e){this.setState({platform:e.target.value})}},{key:"render",value:function(){return r.a.createElement("form",{className:"submit-form",onSubmit:this.sendStreamer},r.a.createElement("label",null,"Streamer Name: ",r.a.createElement("input",{className:"submit-form-name",type:"text",onChange:this.handleChangeText})),r.a.createElement("select",{className:"submit-form-platform",onChange:this.handleChangeSelect},r.a.createElement("option",{value:"default"},"Platform"),r.a.createElement("option",{value:"twitch"},"Twitch.tv")),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(n.Component),S=(a(206),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={streamer:"",platform:"",incidentURL:""},n.handleChangeText=n.handleChangeText.bind(Object(N.a)(n)),n.handleChangeSelect=n.handleChangeSelect.bind(Object(N.a)(n)),n.handleChangeURL=n.handleChangeURL.bind(Object(N.a)(n)),n.sendReport=n.sendReport.bind(Object(N.a)(n)),n}return Object(l.a)(a,[{key:"sendReport",value:function(){return g({url:encodeURI(v+"/report/new"),method:"POST"},this.state.streamer,this.state.platform,this.state.incidentURL).then((function(e){return console.log(e)})).then(this.props.history.push("/"))}},{key:"handleChangeText",value:function(e){this.setState({streamer:e.target.value})}},{key:"handleChangeURL",value:function(e){this.setState({incidentURL:e.target.value})}},{key:"handleChangeSelect",value:function(e){this.setState({platform:e.target.value})}},{key:"render",value:function(){return r.a.createElement("form",{className:"report-form",onSubmit:this.sendReport},r.a.createElement("label",null,"Streamer Name: "),r.a.createElement("input",{className:"report-form-name",type:"text",onChange:this.handleChangeText}),r.a.createElement("select",{className:"report-form-platform",onChange:this.handleChangeSelect},r.a.createElement("option",{value:"default"},"Platform"),r.a.createElement("option",{value:"twitch"},"Twitch.tv")),r.a.createElement("label",null,"Incident URL: "),r.a.createElement("input",{className:"report-form-url",type:"text",onChange:this.handleChangeURL}),r.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(n.Component)),C=(a(207),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-branding"},r.a.createElement(m.b,{to:"/moderation",className:"app-title"},"Home")),r.a.createElement("div",{className:"app-options"},r.a.createElement("nav",{className:"app-nav"},this.props.authenticated?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{onClick:this.props.onLogout},"Logout"))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.c,{to:"/login"},"Login")))))))}}]),a}(n.Component)),R=(a(208),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.approveRequest=function(e,t){console.log("approve"),E({url:v+"/moderation/approve",method:"POST"},e,t)},n.state={approvals:[],reports:[],currentUser:null,authenticated:!1},n.approveRequest=n.approveRequest.bind(Object(N.a)(n)),n.rejectRequest=n.rejectRequest.bind(Object(N.a)(n)),n.removeReportLink=n.removeReportLink.bind(Object(N.a)(n)),n.removeReport=n.removeReport.bind(Object(N.a)(n)),n.removeStreamer=n.removeStreamer.bind(Object(N.a)(n)),n.handleLogout=n.handleLogout.bind(Object(N.a)(n)),n.loadCurrentlyLoggedInUser=n.loadCurrentlyLoggedInUser.bind(Object(N.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.loadCurrentlyLoggedInUser(),b({url:v+"/moderation/all",method:"GET"}).then((function(t){e._isMounted&&e.setState({approvals:t})})),b({url:v+"/report/all",method:"GET"}).then((function(t){e._isMounted&&e.setState({reports:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"rejectRequest",value:function(e,t){console.log("reject"),E({url:v+"/moderation/reject",method:"POST"},e,t)}},{key:"removeReportLink",value:function(e,t,a){console.log("remove report link"),g({url:v+"/moderation/url",method:"DELETE"},e,t,a)}},{key:"removeReport",value:function(e,t){console.log("remove report"),E({url:v+"/moderation/report",method:"DELETE"},e,t)}},{key:"removeStreamer",value:function(e,t){console.log("remove streamer"),E({url:v+"/moderation/stream",method:"DELETE"},e,t)}},{key:"handleLogout",value:function(){localStorage.removeItem("accessToken"),this.setState({authenticated:!1,currentUser:null})}},{key:"loadCurrentlyLoggedInUser",value:function(){var e=this;(localStorage.getItem("accessToken")?b({url:encodeURI(v+"/auth/me"),method:"GET"}):Promise.reject("No Access Token Set")).then((function(t){e.setState({currentUser:t,authenticated:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.approvals,n=t.reports;return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"app-header"},r.a.createElement(C,{authenticated:this.state.authenticated,onLogout:this.handleLogout})),r.a.createElement("div",{className:"moderation-home"},r.a.createElement("div",{className:"split moderation-approval"},r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"moderation-label"},"Approve new Streamers"),r.a.createElement("div",{className:"moderation-approval-list"},a.map((function(t){return r.a.createElement("div",{className:"approval-item"},r.a.createElement("div",{className:"approval-name"},t.username),r.a.createElement("div",{className:"approval-url"},t.streamURL),r.a.createElement("button",{type:"submit",onClick:function(){return e.approveRequest(t.username,t.platform)}},"Approve"),r.a.createElement("button",{type:"submit",onClick:function(){return e.rejectRequest(t.username,t.platform)}},"Reject"))}))))),r.a.createElement("div",{className:"split moderation-report"},r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"moderation-label"},"Handle User Reports"),r.a.createElement("div",{className:"moderation-report-list"},n.map((function(t){return r.a.createElement("div",{className:"report-item"},r.a.createElement("div",{className:"report-name"},t.username),r.a.createElement("div",{className:"report-url-list"},t.incidentURL.map((function(a){return r.a.createElement("a",{className:"report-url-list-item",href:a},a,r.a.createElement("button",{type:"submit",onClick:function(){return e.removeReportLink(t.username,t.platform,a)}},"Remove Report Link"))}))),r.a.createElement("button",{type:"submit",onClick:function(){return e.removeStreamer(t.username,t.platform)}},"Remove Streamer"),r.a.createElement("button",{type:"submit",onClick:function(){return e.removeReport(t.username,t.platform)}},"Remove Report"))})))))))}}]),a}(n.Component)),T=a(184),L=a(185),U=a.n(L),I=(a(212),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={isLoading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.location.state&&this.props.location.state.error&&setTimeout((function(){U.a.error(e.props.location.state.error,{timeout:5e3}),e.props.history.replace({pathname:e.props.location.pathname,state:{}})}),100)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return this.props.authenticated?r.a.createElement(o.a,{to:{pathname:"/moderation",state:{from:this.props.location}}}):r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-content"},r.a.createElement("h1",{className:"login-title"},"Login to Streamers of Color"),r.a.createElement(w,this.props)))}}]),a}(n.Component)),w=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleInputChange=n.handleInputChange.bind(Object(N.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(N.a)(n)),n}return Object(l.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(T.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return b({url:encodeURI(v+"/auth/login"),method:"POST",body:JSON.stringify(e)})}(Object.assign({},this.state)).then((function(e){localStorage.setItem("accessToken",e.token),t.props.history.push("/moderation")})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:this.state.username,className:"form-control",onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,className:"form-control",onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Login")))}}]),a}(n.Component),x=I;t.a=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app-header"},r.a.createElement(d,null)),r.a.createElement("div",{className:"app-body"},r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:O}),r.a.createElement(o.b,{path:"/submit",component:k}),r.a.createElement(o.b,{path:"/report",component:S}),r.a.createElement(o.b,{path:"/moderation",component:R}),r.a.createElement(o.b,{path:"/login",component:x}))))}},188:function(e,t,a){e.exports=a(189)},189:function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=a.n(t),r=a(67),o=a.n(r),c=(a(194),a(186)),l=a(18),s=a(213),i=a(23),m=s();m.use(s.static(i.join(e,"build"))),m.get("/*",(function(t,a){a.sendFile(i.join(e,"build","index.html"))})),o.a.render(n.a.createElement(l.a,null,n.a.createElement(c.a,null)),document.getElementById("root"))}.call(this,"/")},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},212:function(e,t,a){},242:function(e,t){},243:function(e,t){},247:function(e,t){},249:function(e,t){},288:function(e,t){},293:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=293},295:function(e,t){},297:function(e,t){},307:function(e,t){},309:function(e,t){},337:function(e,t){},339:function(e,t){},340:function(e,t){},346:function(e,t){},348:function(e,t){},366:function(e,t){},369:function(e,t){},385:function(e,t){},388:function(e,t){}},[[188,12,13]]]);
//# sourceMappingURL=main.9f88b77e.chunk.js.map